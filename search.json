[{"path":"https://vgxhc.github.io/ntdr/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 ntdr authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://vgxhc.github.io/ntdr/articles/ntdr.html","id":"get_ntd","dir":"Articles","previous_headings":"","what":"get_ntd()","title":"ntdr","text":"get_ntd() main function package. doesn’t required parameters: default, package downloads NTD calls “Complete Monthly Ridership (adjustments estimates).” Alternatively can request raw data (“Raw Monthly Ridership (Adjustments Estimates)”). detailed discussion difference two data types, see blog post. see package downloads fairly large xlsx file web returns tibble 579072 rows 12 columns. first two columns identifiers transit agency; followed human-readable agency name. Note agency name may expect. example, name local agency Madison (Wisconsin) “Metro Transit”. NTD data listed “City Madison”. find agency, use uza_name variable described . NTD data go back far 2002, agencies longer actively report data, report different ID, don’t even exist anymore. reflected active column. reporter_type commonly takes Full reporter value, especially smaller rural systems may different value variable. agencies aren’t full reporters, NTD data may include projections rather actually reported data. uza identifier urbanized areas uza_name name area (usually find local agency). modes denotes type transit reported . lot different modes, including rather obscure ones like “Inclined Plane” (IP) “Alaska Railroad” (AR). can find documentation different modes . tos variable represents “type service”: common values , directly operated service, .e. transit agency running service; PT “purchased transportation”, .e. transit agency contracting services. Often agencies entry , regular, fixed route service PT paratransit specialized forms transit. Finally, month value variables provide actual transit data given month. variable presented value ntd_variable. call get_ntd() without additional parameters, return “unlinked passenger trips” (UPT) metric agencies, modes, types service.","code":"ntd_data <- get_ntd() #> New names: #> • `156143` -> `156143...13` #> • `156143` -> `156143...14` #> • `141871` -> `141871...16` #> • `141871` -> `141871...17` #> • `146253` -> `146253...42` #> • `146253` -> `146253...43` ntd_data #> # A tibble: 579,072 × 12 #>    ntd_id_5 ntd_id_4 agency      active reporter_type   uza uza_name modes tos   #>    <chr>    <chr>    <chr>       <chr>  <chr>         <dbl> <chr>    <chr> <chr> #>  1 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #>  2 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #>  3 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #>  4 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #>  5 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #>  6 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #>  7 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #>  8 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #>  9 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #> 10 00001    0001     King Count… Active Full Reporte…    14 Seattle… DR    TX    #> # ℹ 579,062 more rows #> # ℹ 3 more variables: month <date>, value <dbl>, ntd_variable <chr> colnames(ntd_data) #>  [1] \"ntd_id_5\"      \"ntd_id_4\"      \"agency\"        \"active\"        #>  [5] \"reporter_type\" \"uza\"           \"uza_name\"      \"modes\"         #>  [9] \"tos\"           \"month\"         \"value\"         \"ntd_variable\" ntd_data |>   count(modes) #> # A tibble: 22 × 2 #>    modes      n #>    <chr>  <int> #>  1 AG      1280 #>  2 AR       256 #>  3 CB     35840 #>  4 CC       256 #>  5 CR      9728 #>  6 DR    238336 #>  7 FB     12032 #>  8 HR      3840 #>  9 IP      1024 #> 10 LR      8960 #> # ℹ 12 more rows ntd_data |>   count(tos, sort = TRUE) #> # A tibble: 13 × 2 #>    tos                                                                 n #>    <chr>                                                           <int> #>  1 DO                                                             295424 #>  2 PT                                                             245760 #>  3 TX                                                              31744 #>  4 TN                                                               3072 #>  5 Reduced Reporters                                                 512 #>  6 Rural Reporters                                                   512 #>  7 NA                                                                512 #>  8 Rolling 12-Month Sum                                              256 #>  9 Rolling 12-Month Sum with Reduced Reporters                       256 #> 10 Rolling 12-Month Sum with Reduced and Rural Reporter Estimates    256 #> 11 Subtotal with Reduced Reporters                                   256 #> 12 Subtotal with Reduced and Rural Reporter Estimates                256 #> 13 Total                                                             256"},{"path":"https://vgxhc.github.io/ntdr/articles/ntdr.html","id":"plot-the-data","dir":"Articles","previous_headings":"","what":"Plot the data","title":"ntdr","text":"data returned long format, makes easy create plots:","code":"get_ntd(agency = c(\"City of Madison\", \"Capital Area Transportation Authority\"), modes = \"MB\") |>   dplyr::filter(tos == \"DO\") |>   ggplot(aes(month, value, color = agency)) +   geom_line() +   labs(title = \"Monthly unlinked passenger trips in Madison and Lansing\") +   theme_minimal() #> New names: #> • `156143` -> `156143...13` #> • `156143` -> `156143...14` #> • `141871` -> `141871...16` #> • `141871` -> `141871...17` #> • `146253` -> `146253...42` #> • `146253` -> `146253...43`"},{"path":"https://vgxhc.github.io/ntdr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Harald Kliems. Maintainer, author, copyright holder.","code":""},{"path":"https://vgxhc.github.io/ntdr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Kliems H (2023). ntdr: Retrieve Data National Transit Database. R package version 0.3.0.9000, https://vgxhc.github.io/ntdr/.","code":"@Manual{,   title = {ntdr: Retrieve Data from the National Transit Database},   author = {Harald Kliems},   year = {2023},   note = {R package version 0.3.0.9000},   url = {https://vgxhc.github.io/ntdr/}, }"},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"ntdr-retrieve-data-from-the-national-transit-database-","dir":"","previous_headings":"","what":"Retrieve Data from the National Transit Database","title":"Retrieve Data from the National Transit Database","text":"ntdr package provides convenient interface retrieve monthly data National Transit Database (NTD). Without package, getting NTD data involves going NTD website downloading processing complex Excel workbook. NTD data returned package many quirks. Please use care report issues. learn package, visit package website: https://vgxhc.github.io/ntdr/.","code":""},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Retrieve Data from the National Transit Database","text":"","code":"# The latest stable version can be installed from CRAN: install.packages(\"ntdr\")   # Alternatively, install the latest development version from GitHub: remotes::install_github(\"vgXhc/ntdr\")"},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Retrieve Data from the National Transit Database","text":"Basic usage:","code":"library(ntdr) ntd_madison <- get_ntd(data_type = \"adjusted\", ntd_variable = \"UPT\", agency = \"City of Madison\", modes = \"MB\") #> New names: #> • `156143` -> `156143...13` #> • `156143` -> `156143...14` #> • `141871` -> `141871...16` #> • `141871` -> `141871...17` #> • `146253` -> `146253...42` #> • `146253` -> `146253...43` head(ntd_madison) #> # A tibble: 6 × 12 #>   ntd_id_5 ntd_id_4 agency       active reporter_type   uza uza_name modes tos   #>   <chr>    <chr>    <chr>        <chr>  <chr>         <dbl> <chr>    <chr> <chr> #> 1 50005    5005     City of Mad… Active Full Reporte…    92 Madison… MB    DO    #> 2 50005    5005     City of Mad… Active Full Reporte…    92 Madison… MB    DO    #> 3 50005    5005     City of Mad… Active Full Reporte…    92 Madison… MB    DO    #> 4 50005    5005     City of Mad… Active Full Reporte…    92 Madison… MB    DO    #> 5 50005    5005     City of Mad… Active Full Reporte…    92 Madison… MB    DO    #> 6 50005    5005     City of Mad… Active Full Reporte…    92 Madison… MB    DO    #> # ℹ 3 more variables: month <date>, value <dbl>, ntd_variable <chr>"},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":null,"dir":"Reference","previous_headings":"","what":"Get NTD data — get_ntd","title":"Get NTD data — get_ntd","text":"Get NTD data","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get NTD data — get_ntd","text":"","code":"get_ntd(   agency = \"all\",   data_type = \"adjusted\",   ntd_variable = \"UPT\",   modes = \"all\",   cache = FALSE )"},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get NTD data — get_ntd","text":"agency Name transit agency retrieve. Defaults `` agencies data_type Type NTD data. Either \"raw\" data released without adjustments \"adjusted\" data adjustments estimates ntd_variable variable return. `UPT` unlinked passenger trips, `VRM` vehicle revenue miles, `VRH` vehicle revenue hours, `VOMS` vehicles operated maximum service. modes Transit mode retrieve. Common modes include `MB` (bus), `CR` (commuter rail), `HR` (heavy rail), `LR` (light rail). Defaults `` modes. cache Cache downloaded data. Defaults `FALSE`.","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get NTD data — get_ntd","text":"data frame monthly NTD data requested ntd_variable `value` column","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get NTD data — get_ntd","text":"","code":"if (FALSE) { # interactive() get_ntd(agency = \"City of Madison\", modes = c(\"MB\", \"DR\")) }"},{"path":[]},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-030","dir":"Changelog","previous_headings":"","what":"ntdr 0.3.0","title":"ntdr 0.3.0","text":"CRAN release: 2023-05-30 retire get_ntd_url user-facing function update documentation reflect new NTD language data type","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-021","dir":"Changelog","previous_headings":"","what":"ntdr 0.2.1","title":"ntdr 0.2.1","text":"Bugfix: Cache function fixed (https://github.com/vgXhc/ntdr/issues/2)","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-020","dir":"Changelog","previous_headings":"","what":"ntdr 0.2.0","title":"ntdr 0.2.0","text":"Added NEWS.md file track changes package. Returned data frame now includes ntd_variable denote value represents","code":""}]
