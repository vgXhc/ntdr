[{"path":"https://vgxhc.github.io/ntdr/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 ntdr authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://vgxhc.github.io/ntdr/articles/ntdr.html","id":"get_ntd","dir":"Articles","previous_headings":"","what":"get_ntd()","title":"ntdr","text":"get_ntd() main function package. doesn’t required parameters: see package downloads fairly large xlsx file web returns tibble 570262 rows 12 columns. first two columns identifiers transit agency; followed human-readable agency name. Note agency name may expect. example, name local agency Madison (Wisconsin) “Metro Transit”. NTD data listed “City Madison”. find agency, use uza_name variable described . NTD data go back far 2002, agencies longer actively report data, report different ID, don’t even exist anymore. reflected active column. reporter_type commonly takes Full reporter value, especially smaller rural systems may different value variable. agencies aren’t full reporters, NTD data may include projections rather actually reported data. uza identifier urbanized areas uza_name name area (usually find local agency). modes denotes type transit reported . lot different modes, including rather obscure ones like “Inclined Plane” (IP) “Alaska Railroad” (AR). can find documentation different modes . tos variable represents “type service”: common values , directly operated service, .e. transit agency running service; PT “purchased transportation”, .e. transit agency contracting services. Often agencies entry , regular, fixed route service PT paratransit specialized forms transit. Finally, month value variables provide actual transit data given month. variable presented value ntd_variable. call get_ntd() without additional parameters, return unlinked passenger trips (UPT) metric agencies, modes, types service.","code":"ntd_data <- get_ntd() #> New names: #> • `22526` -> `22526...34` #> • `22523` -> `22523...71` #> • `22526` -> `22526...95` #> • `23344` -> `23344...100` #> • `22523` -> `22523...102` #> • `23344` -> `23344...139` #> • `19423` -> `19423...147` #> • `19423` -> `19423...187` ntd_data #> # A tibble: 570,262 × 12 #>    ntd_id_5 ntd_id_4 agency  active repor…¹   uza uza_n…² modes tos   month      #>    <chr>    <chr>    <chr>   <chr>  <chr>   <dbl> <chr>   <chr> <chr> <date>     #>  1 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-01-01 #>  2 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-02-01 #>  3 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-03-01 #>  4 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-04-01 #>  5 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-05-01 #>  6 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-06-01 #>  7 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-07-01 #>  8 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-08-01 #>  9 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-09-01 #> 10 00001    0001     King C… Active Full R…    14 Seattl… FB    DO    2002-10-01 #> # … with 570,252 more rows, 2 more variables: value <dbl>, ntd_variable <chr>, #> #   and abbreviated variable names ¹​reporter_type, ²​uza_name colnames(ntd_data) #>  [1] \"ntd_id_5\"      \"ntd_id_4\"      \"agency\"        \"active\"        #>  [5] \"reporter_type\" \"uza\"           \"uza_name\"      \"modes\"         #>  [9] \"tos\"           \"month\"         \"value\"         \"ntd_variable\" ntd_data |>    count(modes) #> # A tibble: 22 × 2 #>    modes      n #>    <chr>  <int> #>  1 AG      1265 #>  2 AR       253 #>  3 CB     35167 #>  4 CC       253 #>  5 CR      9614 #>  6 DR    234784 #>  7 FB     11891 #>  8 HR      3795 #>  9 IP      1012 #> 10 LR      8855 #> # … with 12 more rows ntd_data |>    count(tos, sort = T) #> # A tibble: 13 × 2 #>    tos                                                                 n #>    <chr>                                                           <int> #>  1 DO                                                             291203 #>  2 PT                                                             242627 #>  3 TX                                                              31119 #>  4 TN                                                               2277 #>  5 Reduced Reporters                                                 506 #>  6 Rural Reporters                                                   506 #>  7 NA                                                                506 #>  8 Rolling 12-Month Sum                                              253 #>  9 Rolling 12-Month Sum with Reduced Reporters                       253 #> 10 Rolling 12-Month Sum with Reduced and Rural Reporter Estimates    253 #> 11 Subtotal                                                          253 #> 12 Subtotal with Reduced Reporters                                   253 #> 13 Subtotal with Reduced and Rural Reporter Estimates                253"},{"path":"https://vgxhc.github.io/ntdr/articles/ntdr.html","id":"plot-the-data","dir":"Articles","previous_headings":"","what":"Plot the data","title":"ntdr","text":"data returned long format, makes easy create plots:","code":"get_ntd(agency = c(\"City of Madison\", \"Capital Area Transportation Authority\"), modes = \"MB\") |>    dplyr::filter(tos == \"DO\") |>    ggplot(aes(month, value, color = agency)) +   geom_line() +   labs(title = \"Monthly unlinked passenger trips in Madison and Lansing\") +   theme_minimal() #> New names: #> • `22526` -> `22526...34` #> • `22523` -> `22523...71` #> • `22526` -> `22526...95` #> • `23344` -> `23344...100` #> • `22523` -> `22523...102` #> • `23344` -> `23344...139` #> • `19423` -> `19423...147` #> • `19423` -> `19423...187`"},{"path":"https://vgxhc.github.io/ntdr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Harald Kliems. Maintainer, author.","code":""},{"path":"https://vgxhc.github.io/ntdr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Kliems H (2023). ntdr: Retrieve Data National Transit Database. R package version 0.2.0, https://vgxhc.github.io/ntdr/.","code":"@Manual{,   title = {ntdr: Retrieve Data from the National Transit Database},   author = {Harald Kliems},   year = {2023},   note = {R package version 0.2.0},   url = {https://vgxhc.github.io/ntdr/}, }"},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"ntdr-retrieve-data-from-the-national-transit-database","dir":"","previous_headings":"","what":"Retrieve Data from the National Transit Database","title":"Retrieve Data from the National Transit Database","text":"ntdr package provides convenient interface retrieve monthly data National Transit Database (NTD). Without package, getting NTD data involves going NTD website downloading processing complex Excel workbook. package mainly written use, still development NTD data many quirks. Please use care feel report report issues. learn package, visit package website: https://vgxhc.github.io/ntdr/.","code":""},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Retrieve Data from the National Transit Database","text":"can install development version ntdr Github:","code":"remotes::install_github(\"https://github.com/vgXhc/ntdr\")"},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Retrieve Data from the National Transit Database","text":"Basic usage:","code":"library(ntdr) ntd_madison <- get_ntd(data_type = \"adjusted\", ntd_variable = \"UPT\", agency = \"City of Madison\", modes = \"MB\") #> New names: #> • `2033379` -> `2033379...24` #> • `2033379` -> `2033379...26` head(ntd_madison) #> # A tibble: 6 × 11 #>   ntd_id_5 ntd_id_4 agency   active repor…¹   uza uza_n…² modes tos   month      #>   <chr>    <chr>    <chr>    <chr>  <chr>   <dbl> <chr>   <chr> <chr> <date>     #> 1 50005    5005     City of… Inact… Full R…    92 Madiso… MB    DO    2002-01-01 #> 2 50005    5005     City of… Inact… Full R…    92 Madiso… MB    DO    2002-02-01 #> 3 50005    5005     City of… Inact… Full R…    92 Madiso… MB    DO    2002-03-01 #> 4 50005    5005     City of… Inact… Full R…    92 Madiso… MB    DO    2002-04-01 #> 5 50005    5005     City of… Inact… Full R…    92 Madiso… MB    DO    2002-05-01 #> 6 50005    5005     City of… Inact… Full R…    92 Madiso… MB    DO    2002-06-01 #> # … with 1 more variable: value <dbl>, and abbreviated variable names #> #   ¹​reporter_type, ²​uza_name"},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":null,"dir":"Reference","previous_headings":"","what":"Get NTD data — get_ntd","title":"Get NTD data — get_ntd","text":"Get NTD data","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get NTD data — get_ntd","text":"","code":"get_ntd(   agency = \"all\",   data_type = \"adjusted\",   ntd_variable = \"UPT\",   modes = \"all\",   cache = FALSE )"},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get NTD data — get_ntd","text":"agency Name transit agency retrieve. Defaults `` agencies data_type Type NTD data. Either \"raw\" data released without adjustments \"adjusted\" data adjustments. ntd_variable variable return. `UPT` unlinked passenger trips, `VRM` vehicle revenue miles, `VRH` vehicle revenue hours, `VOMS` vehicles operated maximum service. modes Transit mode retrieve. Common modes include `MB` (bus), `CR` (commuter rail), `HR` (heavy rail), `LR` (light rail). Defaults `` modes. cache Cache downloaded data. Defaults `FALSE`.","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get NTD data — get_ntd","text":"data frame monthly NTD data requested ntd_variable `value` column","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get NTD data — get_ntd","text":"","code":"get_ntd(agency = \"City of Madison\", modes = c(\"MB\", \"DR\")) #> New names: #> • `22526` -> `22526...34` #> • `22523` -> `22523...71` #> • `22526` -> `22526...95` #> • `23344` -> `23344...100` #> • `22523` -> `22523...102` #> • `23344` -> `23344...139` #> • `19423` -> `19423...147` #> • `19423` -> `19423...187` #> # A tibble: 1,012 × 12 #>    ntd_id_5 ntd_id_4 agency  active repor…¹   uza uza_n…² modes tos   month      #>    <chr>    <chr>    <chr>   <chr>  <chr>   <dbl> <chr>   <chr> <chr> <date>     #>  1 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-01-01 #>  2 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-02-01 #>  3 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-03-01 #>  4 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-04-01 #>  5 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-05-01 #>  6 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-06-01 #>  7 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-07-01 #>  8 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-08-01 #>  9 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-09-01 #> 10 50005    5005     City o… Inact… Full R…    92 Madiso… DR    DO    2002-10-01 #> # … with 1,002 more rows, 2 more variables: value <dbl>, ntd_variable <chr>, #> #   and abbreviated variable names ¹​reporter_type, ²​uza_name"},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Create NTD download URL — get_ntd_url","title":"Create NTD download URL — get_ntd_url","text":"`get_ntd_url()` returns URL needed download data NTD website","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd_url.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create NTD download URL — get_ntd_url","text":"","code":"get_ntd_url(data_type = \"adjusted\")"},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd_url.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create NTD download URL — get_ntd_url","text":"data_type Type NTD data. Either \"raw\" data released without adjustments \"adjusted\" data adjustments.","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd_url.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create NTD download URL — get_ntd_url","text":"string containing URL download Excel file NTD data.","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd_url.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create NTD download URL — get_ntd_url","text":"","code":"get_ntd_url() #> [1] \"https://www.transit.dot.gov/sites/fta.dot.gov/files/2023-03/January%202023%20Adjusted%20Database_1_0.xlsx\""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-020","dir":"Changelog","previous_headings":"","what":"ntdr 0.2.0","title":"ntdr 0.2.0","text":"Added NEWS.md file track changes package. Returned data frame now includes ntd_variable denote value represents","code":""}]
