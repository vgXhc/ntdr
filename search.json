[{"path":"https://vgxhc.github.io/ntdr/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 ntdr authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://vgxhc.github.io/ntdr/articles/ntdr.html","id":"get_ntd","dir":"Articles","previous_headings":"","what":"get_ntd()","title":"ntdr","text":"get_ntd() main function package. doesn’t required parameters: default, package downloads NTD calls “Complete Monthly Ridership (adjustments estimates).” Alternatively can request raw data (“Raw Monthly Ridership (Adjustments Estimates)”). complete data includes recent data available. downside depending agency, data may based growth estimate, currently way distinguish whether value based agency’s report growth estimate. Thus, recent values values smaller agencies interpreted caution may revised later. raw data reliable data, dataset released year. package downloads fairly large xlsx file web returns tibble 623424 rows 13 columns. first two columns identifiers transit agency; followed human-readable agency name. Note agency name may expect. example, name local agency Madison (Wisconsin) “Metro Transit”. NTD data listed “City Madison”. find agency, use uza_name variable described . NTD data go back far 2002, agencies longer actively report data, report different ID, don’t even exist anymore. reflected active column. April 2024, active data applied whole agency . recently, data distinguishes different types service (see ) within agency, limiting usefulness variable. .e. agency may still actively report data directly operated bus service, longer run (therefore actively report) light rail service. reporter_type variable commonly takes Full reporter value, especially smaller rural systems may different value variable. agencies aren’t full reporters, NTD data may include projections rather actually reported data. Even full reporters, recent data may based estimates may corrected future data releases. uza identifier urbanized areas uza_name name area (usually find local agency). Since July 2023, additional identifier, uace included. future versions dataset, identifier likely replace uza variable. modes denotes type transit reported . lot different modes, including rather obscure ones like “Inclined Plane” (IP) “Alaska Railroad” (AR). can find documentation different modes . Since July 2023, simplified variable mode included, modes_simplified, distinguishes bus, rail, ferry, . tos variable represents “type service”: common values , directly operated service, .e. transit agency running service; PT “purchased transportation”, .e. transit agency contracting services. Often agencies entry , regular, fixed route service PT paratransit specialized forms transit. Finally, month value variables provide actual transit data given month. variable represented value ntd_variable. call get_ntd() without additional parameters, return “unlinked passenger trips” (UPT) metric agencies, modes, types service.","code":"ntd_data <- get_ntd() ntd_data #> # A tibble: 623,424 × 13 #>    ntd_id_5 ntd_id_4 agency      active reporter_type uace  uza_name modes tos   #>    <chr>    <chr>    <chr>       <chr>  <chr>         <chr> <chr>    <chr> <chr> #>  1 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #>  2 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #>  3 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #>  4 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #>  5 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #>  6 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #>  7 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #>  8 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #>  9 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #> 10 00001    0001     King County Active Full Reporter 80389 Seattle… DR    PT    #> # ℹ 623,414 more rows #> # ℹ 4 more variables: modes_simplified <chr>, month <date>, value <dbl>, #> #   ntd_variable <chr> colnames(ntd_data) #>  [1] \"ntd_id_5\"         \"ntd_id_4\"         \"agency\"           \"active\"           #>  [5] \"reporter_type\"    \"uace\"             \"uza_name\"         \"modes\"            #>  [9] \"tos\"              \"modes_simplified\" \"month\"            \"value\"            #> [13] \"ntd_variable\" ntd_data |>   count(modes) #> # A tibble: 19 × 2 #>    modes      n #>    <chr>  <int> #>  1 AR       272 #>  2 CB     38896 #>  3 CC       272 #>  4 CR     10336 #>  5 DR    259488 #>  6 FB     13056 #>  7 HR      4352 #>  8 IP      1088 #>  9 LR      9520 #> 10 MB    220592 #> 11 MG      2176 #> 12 OR       544 #> 13 PB       272 #> 14 RB      5440 #> 15 SR      8704 #> 16 TB      4080 #> 17 TR       544 #> 18 VP     41888 #> 19 YR      1904 ntd_data |>   count(tos, sort = TRUE) #> # A tibble: 4 × 2 #>   tos        n #>   <chr>  <int> #> 1 DO    318784 #> 2 PT    266016 #> 3 TX     34272 #> 4 TN      4352"},{"path":"https://vgxhc.github.io/ntdr/articles/ntdr.html","id":"plot-the-data","dir":"Articles","previous_headings":"","what":"Plot the data","title":"ntdr","text":"data returned long format, makes easy create plots:","code":"get_ntd(agency = c(\"City of Madison\", \"Capital Area Transportation Authority\"), modes = \"MB\") |>   dplyr::filter(tos == \"DO\") |>   ggplot(aes(month, value, color = agency)) +   geom_line() +   labs(title = \"Monthly unlinked passenger trips in Madison and Lansing\") +   theme_minimal()"},{"path":"https://vgxhc.github.io/ntdr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Harald Kliems. Maintainer, author, copyright holder. Eli Pousson. Contributor.","code":""},{"path":"https://vgxhc.github.io/ntdr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Kliems H (2024). ntdr: Retrieve Data National Transit Database. R package version 0.4.0.9000, https://github.com/vgXhc/ntdr, https://vgxhc.github.io/ntdr/.","code":"@Manual{,   title = {ntdr: Retrieve Data from the National Transit Database},   author = {Harald Kliems},   year = {2024},   note = {R package version 0.4.0.9000, https://github.com/vgXhc/ntdr},   url = {https://vgxhc.github.io/ntdr/}, }"},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"ntdr-retrieve-data-from-the-national-transit-database-","dir":"","previous_headings":"","what":"Retrieve Data from the National Transit Database","title":"Retrieve Data from the National Transit Database","text":"ntdr package provides convenient interface retrieve monthly data National Transit Database (NTD). Without package, getting NTD data involves going NTD website downloading processing complex Excel workbook. NTD data returned package many quirks subtleties. Please use care report issues. learn package, visit package website: https://vgxhc.github.io/ntdr/.","code":""},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Retrieve Data from the National Transit Database","text":"","code":"# The latest stable version can be installed from CRAN: install.packages(\"ntdr\")   # Alternatively, install the latest development version from GitHub: remotes::install_github(\"vgXhc/ntdr\")"},{"path":"https://vgxhc.github.io/ntdr/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Retrieve Data from the National Transit Database","text":"Basic usage:","code":"library(ntdr)  options(ntdr.cache = TRUE)  ntd_madison <- get_ntd(   data_type = \"adjusted\",   ntd_variable = \"UPT\",   agency = \"City of Madison\",   modes = \"MB\" )  head(ntd_madison) #> # A tibble: 6 × 13 #>   ntd_id_5 ntd_id_4 agency       active reporter_type uace  uza_name modes tos   #>   <chr>    <chr>    <chr>        <chr>  <chr>         <chr> <chr>    <chr> <chr> #> 1 50005    5005     City of Mad… Active Full Reporter 53200 Madison… MB    DO    #> 2 50005    5005     City of Mad… Active Full Reporter 53200 Madison… MB    DO    #> 3 50005    5005     City of Mad… Active Full Reporter 53200 Madison… MB    DO    #> 4 50005    5005     City of Mad… Active Full Reporter 53200 Madison… MB    DO    #> 5 50005    5005     City of Mad… Active Full Reporter 53200 Madison… MB    DO    #> 6 50005    5005     City of Mad… Active Full Reporter 53200 Madison… MB    DO    #> # ℹ 4 more variables: modes_simplified <chr>, month <date>, value <dbl>, #> #   ntd_variable <chr>"},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":null,"dir":"Reference","previous_headings":"","what":"Get National Transit Database (NTD) data — get_ntd","title":"Get National Transit Database (NTD) data — get_ntd","text":"[get_ntd()] downloads Excel file adjusted raw monthly ridership files provided National Transit Database transforms data long-format data frame one variable. Optionally cache source spreadsheet filter agency mode.","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get National Transit Database (NTD) data — get_ntd","text":"","code":"get_ntd(   agency = \"all\",   data_type = \"adjusted\",   ntd_variable = \"UPT\",   modes = \"all\",   cache = getOption(\"ntdr.cache\", FALSE) )"},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get National Transit Database (NTD) data — get_ntd","text":"agency Name transit agency retrieve. Defaults `` agencies data_type Type NTD data. Either \"raw\" data released without adjustments \"adjusted\" data adjustments estimates ntd_variable variable variables return. `UPT` unlinked passenger trips, `VRM` vehicle revenue miles, `VRH` vehicle revenue hours, `VOMS` vehicles operated maximum service. modes Transit mode modes retrieve. Common modes include `MB` (bus), `CR` (commuter rail), `HR` (heavy rail), `LR` (light rail). Defaults `` modes. cache Cache downloaded data. Defaults `FALSE`. Set default value \"ntdr.cache\" option.","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get National Transit Database (NTD) data — get_ntd","text":"data frame monthly NTD data requested `ntd_variable`   `value` column","code":""},{"path":"https://vgxhc.github.io/ntdr/reference/get_ntd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get National Transit Database (NTD) data — get_ntd","text":"","code":"if (FALSE) { # interactive() get_ntd(agency = \"City of Madison\", modes = c(\"MB\", \"DR\")) }"},{"path":"https://vgxhc.github.io/ntdr/reference/ntdr-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ntdr: Retrieve Data from the National Transit Database — ntdr-package","title":"ntdr: Retrieve Data from the National Transit Database — ntdr-package","text":"Downloads latest 'National Transit Database' data, processes , returns tidy data format.","code":""},{"path":[]},{"path":"https://vgxhc.github.io/ntdr/reference/ntdr-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ntdr: Retrieve Data from the National Transit Database — ntdr-package","text":"Maintainer: Harald Kliems kliems@gmail.com (ORCID) [copyright holder] contributors: Eli Pousson eli.pousson@gmail.com (ORCID) [contributor]","code":""},{"path":[]},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-040","dir":"Changelog","previous_headings":"","what":"ntdr 0.4.0","title":"ntdr 0.4.0","text":"CRAN release: 2024-10-25 Remove httr Imports tidyverse Suggests Add tidyr, rappdirs, httr2, rlang Imports add withr Suggests. Improve validation agency modes arguments Add supporting setting cache argument option Add package-level documentation Thanks new contributor Eli Pousson making improvements","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-034","dir":"Changelog","previous_headings":"","what":"ntdr 0.3.4","title":"ntdr 0.3.4","text":"CRAN release: 2024-04-05 small updates documentation account changes April data release (#14)","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-033","dir":"Changelog","previous_headings":"","what":"ntdr 0.3.3","title":"ntdr 0.3.3","text":"CRAN release: 2023-10-07 Bugfix: Fixing breaking change August data release (#12)","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-032","dir":"Changelog","previous_headings":"","what":"ntdr 0.3.2","title":"ntdr 0.3.2","text":"CRAN release: 2023-09-09 Bugfix: Change source data leads incorrect column labels (#9)","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-031","dir":"Changelog","previous_headings":"","what":"ntdr 0.3.1","title":"ntdr 0.3.1","text":"CRAN release: 2023-07-15 Bugfix: Change source data layout breaks package (https://github.com/vgXhc/ntdr/issues/6)","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-030","dir":"Changelog","previous_headings":"","what":"ntdr 0.3.0","title":"ntdr 0.3.0","text":"CRAN release: 2023-05-30 retire get_ntd_url user-facing function update documentation reflect new NTD language data type","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-021","dir":"Changelog","previous_headings":"","what":"ntdr 0.2.1","title":"ntdr 0.2.1","text":"Bugfix: Cache function fixed (https://github.com/vgXhc/ntdr/issues/2)","code":""},{"path":"https://vgxhc.github.io/ntdr/news/index.html","id":"ntdr-020","dir":"Changelog","previous_headings":"","what":"ntdr 0.2.0","title":"ntdr 0.2.0","text":"Added NEWS.md file track changes package. Returned data frame now includes ntd_variable denote value represents","code":""}]
